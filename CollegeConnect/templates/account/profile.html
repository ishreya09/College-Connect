{% extends 'base.html' %}
{% load static %}

{% block metatags %}
<title>Profile : College Connect</title>

{% endblock %}

{% block content %}

<div class="container">
    <h1> {{user.first_name}} {{user.last_name}} </h1>
    <div class="row">
        <!-- User details -->
        <div class="col-md-4" style="padding:20px;">
            <div class="bg-dusky mb-3 content">

                <div class="row">
                    <div class="col-md-6">
                        <span>
                            <a href="/account/edit_profile">
                                <button type="submit" style="width:90%;padding:20px;margin:20px;border-radius:20px"
                                    class="btn btn-success">
                                    Edit Profile
                                </button>
                            </a>

                        </span>
                    </div>
                    <div class="col-md-4">
                        <a href="/account/logout">
                            <button type="submit" style="width:90%;padding:20px;margin:20px;border-radius:20px"
                                class="btn btn-danger">
                                Logout
                            </button>
                        </a>
                    </div>

                </div>
                <hr>

                <div class="row">
                    <h3> Bio </h3>
                    <span>
                        <!-- bio -->
                        {{student.bio}}
                    </span>
                </div>
                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <span>SRN</span>
                    </div>
                    <div class="col-md-8">
                        <span>{{student.student_id}}</span>
                    </div>
                </div>

                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <span>Username</span>
                    </div>
                    <div class="col-md-8">
                        <span> {{user.username}}</span>
                    </div>
                </div>

                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <span>Department</span>
                    </div>
                    <div class="col-md-8">
                        <span>{{student.department}}</span>
                    </div>
                </div>

                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <span>Branch</span>
                    </div>
                    <div class="col-md-8">
                        <span>{{student.branch}}</span>
                    </div>
                </div>

                <hr>


                <div class="row">
                    <div class="col-md-4">
                        <span>Year of Passing</span>
                    </div>
                    <div class="col-md-8">
                        <span>{{student.year_of_passing_out}}</span>
                    </div>
                </div>

                <hr>
                <div class="row">
                    <div class="col-md-6">
                        <span>
                            <a href="#">
                                <button type="submit" style="width:90%;padding:20px;margin:20px;border-radius:20px"
                                    class="btn btn-success">
                                    Apply for Mentor
                                </button>
                            </a>
                        </span>
                    </div>
                    <div class="col-md-4">
                        <span>
                            <input type="text" id="profile-link-copy"
                                value="127.0.0.1:8000/account/profile/{{user.username}}" hidden>
                            <a>
                                <button tooltip="copied" type="submit"
                                    style="width:90%;padding:20px;margin:20px;border-radius:20px"
                                    class="btn btn-warning" id="copy-button">
                                    Copy Profile Link
                                </button>
                            </a>

                        </span>

                    </div>
                </div>

                <!-- <hr> -->


            </div>
        </div>

        <!-- User Posts -->
        <div class="col-md-8">
            <div class="row bg-dusky">
                <h3>Create Post </h3>

                <!--form comes here (rich text editor) -->

            </div>
            <div class="row bg-dusky">
                <h3>My Posts </h3>
            </div>

        </div>
    </div>
</div>


<!-- Javascript -->
<script>

    // Find the elements by their IDs
    const textToCopy = document.getElementById("profile-link-copy");
    const copyButton = document.getElementById("copy-button");

    // Add a click event listener to the copy button
    copyButton.addEventListener("click", function () {
        // Select the text to copy
        textToCopy.select();

        // Execute the copy command
        if (document.execCommand("copy")) {
            // Text was successfully copied
            alert("Text copied to clipboard: " + textToCopy.value);

            // tooltip that it was copied and self destroy in 2
            $(copyButton).tooltip('show');

            // Hide the tooltip after 2 seconds
            setTimeout(function () {
                $(copyButton).tooltip('hide');
            }, 2000);

        } else {
            // Copy command failed
            // alert("Copy to clipboard failed. Please copy the text manually.");
        }
    });


</script>

{% endblock %}